<!DOCTYPE html>
<html>
<head>
	<title>User Online Status Checker</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div class="form-container">
		<h2>Enter a Habbo name:</h2>
		<form id="habbo-form">
			<input type="text" id="habbo-name" name="habbo-name" placeholder="Enter name here">
			<button type="submit">Check Status</button>
		</form>
	</div>

	<audio id="notification-sound">
		<source src="notification.mp3" type="audio/mpeg">
	</audio>

	<script>
		const form = document.getElementById('habbo-form');
		const input = document.getElementById('habbo-name');
		const sound = document.getElementById('notification-sound');

		form.addEventListener('submit', (event) => {
			event.preventDefault();

			const habboName = input.value;

			fetch(`https://www.habbo.com/api/public/users?name=${habboName}`)
				.then(response => response.json())
				.then(data => {
					if (data.online) {
						showStatus(`${habboName} is online!`, 'online');
						sound.play();
					} else {
						showStatus(`${habboName} is offline.`, 'offline');
					}
				})
				.catch(error => {
					showStatus(`An error occurred while checking status. Please try again.`, 'error');
				});

			// Store the habboName in a cookie
			const cookieName = 'trackedHabboNames';
			let trackedNames = [];
			if (document.cookie.split(';').some((item) => item.trim().startsWith(cookieName + '='))) {
				trackedNames = JSON.parse(getCookie(cookieName));
			}
			if (!trackedNames.includes(habboName)) {
				trackedNames.push(habboName);
			}
			document.cookie = `${cookieName}=${JSON.stringify(trackedNames)}`;
		});

		setInterval(() => {
			const trackedNames = JSON.parse(getCookie('trackedHabboNames'));

			trackedNames.forEach((habboName) => {
				fetch(`https://www.habbo.com/api/public/users?name=${habboName}`)
					.then(response => response.json())
					.then(data => {
						if (data.online) {
							showStatus(`${habboName} is online!`, 'online');
							sound.play();
						} else {
							showStatus(`${habboName} is offline.`, 'offline');
						}
					})
					.catch(error => {
						showStatus(`An error occurred while checking status. Please try again.`, 'error');
					});
			});
		}, 15000);

		function showStatus(message, status) {
			const statusDiv = document.createElement('div');
			statusDiv.textContent = message;

			if (status === 'online') {
				statusDiv.classList.add('online-status');
			} else if (status === 'offline') {
				statusDiv.classList.add('offline-status');
			}

			form.appendChild(statusDiv);
		}

		function getCookie(name) {
			const value = `; ${document.cookie}`;
			const parts = value.split(`; ${name}=`);
			if (parts.length === 2) {
				return parts.pop().split(';').shift();
			}
		}
	</script>

	<style>
		.form-container {
			width: 400px;
			margin: 0 auto;
			text-align: center;
		}

		#habbo-name {
			padding: 10px;
			border-radius: 5px;
			border: none;
		}

		button {
			padding: 10px 20px;
			background-color: #4CAF50;
			color: white;
			border-radius: 5px;
			border: none;
			cursor: pointer;
		}

		button:hover {
			background-color: #3e8e41;
		}

		.online-status {
			color: green;
			font-weight: bold;
		}

		.offline-status {
			color: red;
			font-weight: bold;
		}
	</style>
